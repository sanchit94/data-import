# `@infino/data-models`

## Introduction
The data models package represents all the models and data forms used between Infino and Donut and
any accompanying service(s).

## Usage
Since this is a private package, you can't simply do a `npm i`. You need to configure your NPM
token first. You can find the token on the shared 1Password vault under `NPM Read-Only Token`. It'd
be a good idea to add it to your `.bashrc` or `.zshrc` to automatically load it. Create a `.npmrc`
file in your project directory with: `//registry.npmjs.org/:_authToken=${INFINO_NPM_TOKEN}` where
`INFINO_NPM_TOKEN` is the name of your environment variable in `.bashrc` or `.zshrc`. Now you can
install packages. :smile:

Once all of that is done, you can simply `npm i -S @infino/data-models`.

## API
You can find a list of all the models in the [`API`](API.md) document. In general, when you
`require` this package, it exposes `Mongo` and `Postgres` objects. Each object contains
`assertConnection()` function which in the case of: i) Postgres, executes `sequelize.authenticate()`
and; ii) Mongo, executes `mongoose.connect(...)`.

You can configure the connection details using environment variables as described in the API.

## Scripts
There are a few scripts to help you with the development:

* `dm-migrate` - run all migrations;
* `dm-seed` - run all seeds;
* `dm-unmigrate` - remove all migrations;
* `dm-unseed` - remove all seeds;

Since they require database credentials, you can use them in the form:

```shell
$ DATA_POSTGRES_USER=root npx db-migrate
```
