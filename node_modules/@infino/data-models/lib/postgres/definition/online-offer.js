const { Sequelize: { Model } } = require( 'sequelize' );
const sequelizePaginate = require( 'sequelize-paginate' );
const { OnlineOffer: OnlineOfferSchema } = require( '../schema' );

class OnlineOffer extends Model {}

module.exports = sequelize => {

    OnlineOffer.init( OnlineOfferSchema, { sequelize, tableName: 'online_offers', underscored: true, timestamps: true } );
    OnlineOffer.associate = models => {

        OnlineOffer.belongsTo( models.OnlineMerchant, { foreignKey: 'merchantId' } );
        OnlineOffer.hasMany( models.UserOnlineOffer, { foreignKey: 'onlineOfferId' } );
        OnlineOffer.hasMany( models.OnlineOfferFinance, { foreignKey: 'offerId' } );

    };

    sequelizePaginate.paginate( OnlineOffer );
    return OnlineOffer;

};
