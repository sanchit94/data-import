const { Sequelize: { Model } } = require( 'sequelize' );
const sequelizePaginate = require( 'sequelize-paginate' );
const { CardRetrievalRequest: CardRetrievalRequestSchema } = require( '../schema' );

class CardRetrievalRequest extends Model {}

module.exports = sequelize => {

    CardRetrievalRequest.init( CardRetrievalRequestSchema, { sequelize, tableName: 'card_retrieval_requests', underscored: true, timestamps: true } );
    CardRetrievalRequest.associate = models => {

        CardRetrievalRequest.belongsTo( models.Card, { foreignKey: 'cardId' } );
        CardRetrievalRequest.belongsTo( models.Session, { foreignKey: 'sessionId' } );
        CardRetrievalRequest.belongsTo( models.VaultRequestMetadata, { foreignKey: 'vaultRequestMetadataId' } );

    };

    sequelizePaginate.paginate( CardRetrievalRequest );
    return CardRetrievalRequest;

};
