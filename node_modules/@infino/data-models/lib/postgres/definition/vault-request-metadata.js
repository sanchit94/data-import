const { Sequelize: { Model } } = require( 'sequelize' );
const sequelizePaginate = require( 'sequelize-paginate' );
const { VaultRequestMetadata: VaultRequestMetadataSchema } = require( '../schema' );

class VaultRequestMetadata extends Model {}

module.exports = sequelize => {

    VaultRequestMetadata.init( VaultRequestMetadataSchema, { sequelize, tableName: 'vault_request_metadata', underscored: true, timestamps: true } );
    VaultRequestMetadata.associate = models => {

        VaultRequestMetadata.hasMany( models.CardAdditionRequest, { foreignKey: 'vaultRequestMetadataId' } );
        VaultRequestMetadata.hasMany( models.CardRetrievalRequest, { foreignKey: 'vaultRequestMetadataId' } );

    };

    sequelizePaginate.paginate( VaultRequestMetadata );
    return VaultRequestMetadata;

};
