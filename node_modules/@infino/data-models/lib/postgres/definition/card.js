const { Sequelize: { Model } } = require( 'sequelize' );
const sequelizePaginate = require( 'sequelize-paginate' );
const { Card: CardSchema } = require( '../schema' );

class Card extends Model {}

module.exports = sequelize => {

    Card.init( CardSchema, { sequelize, tableName: 'cards', underscored: true, timestamps: true } );
    Card.associate = models => {

        Card.belongsTo( models.User, { foreignKey: 'userId' } );
        Card.belongsTo( models.CardType, { foreignKey: 'cardTypeId' } );

    };

    sequelizePaginate.paginate( Card );
    return Card;

};
