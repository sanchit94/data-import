const { Sequelize: { Model } } = require( 'sequelize' );
const sequelizePaginate = require( 'sequelize-paginate' );
const { Collection: CollectionSchema } = require( '../schema' );

class Collection extends Model {}

module.exports = sequelize => {

    Collection.init( CollectionSchema, { sequelize, tableName: 'collections', underscored: true, timestamps: true } );
    Collection.associate = models => {

        Collection.hasMany( models.CuratedOffer, { foreignKey: 'collectionId' } );
        Collection.hasMany( models.CuratedGiftcard, { foreignKey: 'collectionId' } );

    };

    sequelizePaginate.paginate( Collection );
    return Collection;

};
