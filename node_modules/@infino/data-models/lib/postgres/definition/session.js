const { Sequelize: { Model } } = require( 'sequelize' );
const { Session: SessionSchema } = require( '../schema' );

class Session extends Model {}

module.exports = sequelize => {

    Session.init( SessionSchema, { sequelize, tableName: 'sessions', underscored: true, timestamps: true } );
    Session.associate = models => {

        Session.belongsTo( models.User );
        Session.hasMany( models.RevokedToken, { foreignKey: 'sessionId' } );

    };

    return Session;

};
