const { Sequelize: { Model } } = require( 'sequelize' );
const { Order: OrderSchema } = require( '../schema' );

class Order extends Model {}

module.exports = sequelize => {

    Order.init( OrderSchema, { sequelize, tableName: 'orders', underscored: true, timestamps: true } );
    Order.associate = models => {

        Order.belongsTo( models.User, { foreignKey: 'userId' } );
        Order.belongsTo( models.PaymentMethod, { foreignKey: 'paymentMethodId' } );
        Order.belongsTo( models.Provider, { foreignKey: 'providerId' } );
        Order.belongsTo( models.Giftcard, { foreignKey: 'giftcardId' } );

    };

    return Order;

};
