const { DataTypes } = require( 'sequelize' );

module.exports = {

    up: queryInterface => queryInterface.addColumn( 'orders', 'order_status', {
        type: DataTypes.ENUM( // eslint-disable-line new-cap
            'CREATED',
            'PAYMENT_FAILED',
            'UPSTREAM_QUANTITY_NOT_AVAILABLE',
            'GENERATION_TIMEOUT',
            'INVALID_DENOMINATION',
            'COMPLETE',
            'GYFTR_ERROR'
        ),
        defaultValue: 'CREATED',
        allowNull: false,
    } ),

    down: queryInterface => Promise.all( [
        queryInterface.removeColumn( 'orders', 'order_status' ),

        // Refer to Sequelize issue: #2554
        queryInterface.sequelize.query( 'DROP TYPE enum_orders_order_status' ),
    ] )

};
